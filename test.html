<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval';">
  <title>IFC Viewer Test - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞</title>
  
  <!-- –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø–∞–∫–µ—Ç–∞ -->
  <link rel="stylesheet" href="/src/style.css" />
  
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      margin: 0;
      padding: 0;
      background: #f8f9fa;
    }
    .test-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    .viewer-modal {
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
    }
    .viewer-content {
      width: 90vw;
      height: 80vh;
      max-width: 1100px;
      background: white;
      border-radius: 8px;
      overflow: hidden;
    }
    .demo-section {
      background: white;
      border-radius: 8px;
      padding: 24px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .code-block {
      background: #f1f5f9;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      padding: 16px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      margin: 12px 0;
    }
    
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
    .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
    .text-2xl { font-size: 1.5rem; line-height: 2rem; }
    .font-bold { font-weight: 700; }
    .mb-3 { margin-bottom: 0.75rem; }
    .mb-4 { margin-bottom: 1rem; }
    .text-gray-600 { color: #4b5563; }
    .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
    .flex-1 { flex: 1 1 0%; }
    .flex-none { flex: none; }
    .grid { display: grid; }
    .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
    .gap-4 { gap: 1rem; }
    .card { display: flex; flex-direction: column; }
    .card-body { flex: 1 1 auto; padding: 2rem; }
    .card-title { color: inherit; font-weight: 600; font-size: 1.25rem; margin-bottom: 0.5rem; }
    .card-actions { display: flex; flex-wrap: wrap; align-items: flex-start; gap: 0.5rem; }
    .shadow { box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); }
    .btn-info { background-color: #0ea5e9; color: white; }
    .btn-info:hover { background-color: #0284c7; }
    .btn-warning { background-color: #f59e0b; color: white; }
    .btn-warning:hover { background-color: #d97706; }
    .btn-neutral { background-color: #6b7280; color: white; }
    .btn-neutral:hover { background-color: #4b5563; }
    .btn-accent { background-color: #8b5cf6; color: white; }
    .btn-accent:hover { background-color: #7c3aed; }
    .btn-error { background-color: #dc2626; color: white; }
    .btn-error:hover { background-color: #b91c1c; }
    .btn-outline { background-color: transparent; border: 1px solid currentColor; }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞ */
    .bg-blue-50 { background-color: #eff6ff; }
    .border-blue-200 { border-color: #bfdbfe; }
    .text-blue-800 { color: #1e40af; }
    .text-blue-700 { color: #1d4ed8; }
    .text-blue-600 { color: #2563eb; }
    .list-disc { list-style-type: disc; }
    .list-inside { list-style-position: inside; }
    .space-y-1 > * + * { margin-top: 0.25rem; }
    .btn-circle { border-radius: 9999px; width: 3rem; height: 3rem; padding: 0; }
    
    @media (min-width: 768px) {
      .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
      .md\\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
  </style>
</head>
<body>
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
  <div class="navbar bg-base-100 shadow-lg">
    <div class="flex-1">
      <h1 class="text-xl font-bold">üèóÔ∏è IFC Viewer Test</h1>
    </div>
    <div class="flex-none">
      <button class="btn btn-ghost" onclick="toggleTheme()">üåì</button>
    </div>
  </div>

  <div class="test-container">
    <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
    <div class="demo-section">
      <h2 class="text-2xl font-bold mb-4">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ @sequent-org/ifc-viewer</h2>
      <p class="text-gray-600 mb-4">
        –≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ <code>IfcViewer</code> –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–µ–∫—Ç—ã.
        –ü—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ, –∏–º–∏—Ç–∏—Ä—É—è —Ä–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Laravel + Vite –ø—Ä–æ–µ–∫—Ç–µ.
      </p>
    </div>

    <!-- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è -->
    <div class="demo-section">
      <h3 class="text-lg font-semibold mb-3">üìã –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h3>
      
      <h4 class="font-medium mb-2">1. –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4>
      <div class="code-block">
import { IfcViewer } from '@sequent-org/ifc-viewer'

const viewer = new IfcViewer({
  container: document.getElementById('modal-content'),
  ifcUrl: '/path/to/model.ifc',
  showSidebar: true,
  showControls: true
})

await viewer.init()
      </div>

      <h4 class="font-medium mb-2">2. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</h4>
      <div class="code-block">
const viewer = new IfcViewer({
  container: '#viewer-container',
  autoLoad: false  // –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
})

await viewer.init()
await viewer.loadModel(userFile)  // File –æ–±—ä–µ–∫—Ç
      </div>

      <h4 class="font-medium mb-2">3. –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—É—Ç—å –∫ WASM —Ñ–∞–π–ª—É:</h4>
      <div class="code-block">
const viewer = new IfcViewer({
  container: '#viewer-container',
  ifcUrl: '/models/building.ifc',
  wasmUrl: '/custom-path/web-ifc.wasm'  // –£–∫–∞–∑—ã–≤–∞–µ–º —Å–≤–æ–π –ø—É—Ç—å –∫ WASM
})

await viewer.init()
      </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div class="demo-section">
      <h3 class="text-lg font-semibold mb-4">üß™ –¢–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h3>
      
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
        <h4 class="font-medium text-blue-800 mb-2">üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ wasmUrl –∏ Web Workers</h4>
        <p class="text-sm text-blue-700 mb-2">
          –¢–µ—Å—Ç—ã 7-10 –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º <code>wasmUrl</code> –∏ –ø—Ä–æ–≤–µ—Ä–∫—É Web Workers:
        </p>
        <ul class="text-sm text-blue-700 list-disc list-inside space-y-1">
          <li><strong>–¢–µ—Å—Ç 7:</strong> –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø—É—Ç—å –∫ WASM —Ñ–∞–π–ª—É</li>
          <li><strong>–¢–µ—Å—Ç 8:</strong> –ù–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π</li>
          <li><strong>–¢–µ—Å—Ç 9:</strong> –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ WASM —Å fallback –∑–∞—â–∏—Ç–æ–π</li>
          <li><strong>–¢–µ—Å—Ç 10:</strong> –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è Web Workers (IFCWorker)</li>
        </ul>
        <p class="text-xs text-blue-600 mt-2">
          üí° –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Console –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ WASM –∏ —Å—Ç–∞—Ç—É—Å–∞ Web Workers
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- –¢–µ—Å—Ç 1: –†–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
        <div class="card bg-base-100 shadow">
          <div class="card-body">
            <h4 class="card-title text-base">–¢–µ—Å—Ç 1: –†–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</h4>
            <p class="text-sm text-gray-600 mb-4">
              –°–æ–∑–¥–∞—ë—Ç IfcViewer –≤ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ - —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
            </p>
            <div class="card-actions">
              <button class="btn btn-primary btn-sm" onclick="testDefault()">
                üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
              </button>
            </div>
          </div>
        </div>

        <!-- –¢–µ—Å—Ç 2: –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ -->  
        <div class="card bg-base-100 shadow">
          <div class="card-body">
            <h4 class="card-title text-base">–¢–µ—Å—Ç 2: –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞</h4>
            <p class="text-sm text-gray-600 mb-4">
              –°–æ–∑–¥–∞—ë—Ç IfcViewer –±–µ–∑ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏, –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª
            </p>
            <div class="card-actions">
              <button class="btn btn-secondary btn-sm" onclick="testManualLoad()">
                üìÅ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
              </button>
            </div>
          </div>
        </div>

        <!-- –¢–µ—Å—Ç 3: –ë–µ–∑ –≤–µ—Ä—Ö–Ω–µ–π –ø–∞–Ω–µ–ª–∏ -->
        <div class="card bg-base-100 shadow">
          <div class="card-body">
            <h4 class="card-title text-base">–¢–µ—Å—Ç 3: –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫</h4>
            <p class="text-sm text-gray-600 mb-4">
              –°–æ–∑–¥–∞—ë—Ç IfcViewer –≤–æ–æ–±—â–µ –±–µ–∑ –ø–∞–Ω–µ–ª–µ–π - —á–∏—Å—Ç—ã–π 3D –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫
            </p>
            <div class="card-actions">
              <button class="btn btn-accent btn-sm" onclick="testCleanViewer()">
                ‚ö° –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
              </button>
            </div>
          </div>
        </div>

        <!-- –¢–µ—Å—Ç 4: –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ -->
        <div class="card bg-base-100 shadow">
          <div class="card-body">
            <h4 class="card-title text-base">–¢–µ—Å—Ç 4: –¢—ë–º–Ω–∞—è —Ç–µ–º–∞</h4>
            <p class="text-sm text-gray-600 mb-4">
              –°–æ–∑–¥–∞—ë—Ç IfcViewer —Å —Ç—ë–º–Ω–æ–π —Ç–µ–º–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            </p>
            <div class="card-actions">
              <button class="btn btn-neutral btn-sm" onclick="testDarkTheme()">
                üåô –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
              </button>
            </div>
          </div>
        </div>

        <!-- –¢–µ—Å—Ç 5: –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –ø–∞–Ω–µ–ª–µ–π -->
        <div class="card bg-base-100 shadow">
          <div class="card-body">
            <h4 class="card-title text-base">–¢–µ—Å—Ç 5: –í—Å–µ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h4>
            <p class="text-sm text-gray-600 mb-4">
              –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å, –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            </p>
            <div class="card-actions">
              <button class="btn btn-info btn-sm" onclick="testFullToolbar()">
                üéõÔ∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
              </button>
            </div>
          </div>
        </div>

        <!-- –¢–µ—Å—Ç 6: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ -->
        <div class="card bg-base-100 shadow">
          <div class="card-body">
            <h4 class="card-title text-base">–¢–µ—Å—Ç 6: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫</h4>
            <p class="text-sm text-gray-600 mb-4">
              –°–æ–∑–¥–∞—ë—Ç IfcViewer –≤ –Ω–∞—Å—Ç–æ—è—â–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ - —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å, –±–µ–∑ –∫–Ω–æ–ø–æ–∫
            </p>
            <div class="card-actions">
              <button class="btn btn-warning btn-sm" onclick="testRealMinimal()">
                üîç –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
              </button>
            </div>
          </div>
        </div>

        <!-- –¢–µ—Å—Ç 7: –ö–∞—Å—Ç–æ–º–Ω—ã–π WASM URL -->
        <div class="card bg-base-100 shadow">
          <div class="card-body">
            <h4 class="card-title text-base">–¢–µ—Å—Ç 7: –ö–∞—Å—Ç–æ–º–Ω—ã–π WASM URL</h4>
            <p class="text-sm text-gray-600 mb-4">
              –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ <code>wasmUrl</code> –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –ø—É—Ç–∏ –∫ WASM —Ñ–∞–π–ª—É.
              –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Å —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø—É—Ç–µ–º <code>/wasm/web-ifc.wasm</code>.
            </p>
            <div class="code-block">
              <div class="text-gray-500 text-xs mb-2">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</div>
              <div>wasmUrl: '/wasm/web-ifc.wasm'</div>
            </div>
            <div class="card-actions">
              <button class="btn btn-secondary btn-sm" onclick="testCustomWasm()">
                ‚öôÔ∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
              </button>
            </div>
          </div>
        </div>

        <!-- –¢–µ—Å—Ç 8: –ù–µ–≤–µ—Ä–Ω—ã–π WASM URL -->
        <div class="card bg-base-100 shadow">
          <div class="card-body">
            <h4 class="card-title text-base">–¢–µ—Å—Ç 8: –ù–µ–≤–µ—Ä–Ω—ã–π WASM URL</h4>
            <p class="text-sm text-gray-600 mb-4">
              –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º –ø—É—Ç–∏ –∫ WASM —Ñ–∞–π–ª—É.
              –î–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –ø—É—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
            </p>
            <div class="code-block">
              <div class="text-gray-500 text-xs mb-2">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</div>
              <div>wasmUrl: '/wrong-path/web-ifc.wasm'</div>
            </div>
            <div class="card-actions">
              <button class="btn btn-warning btn-sm" onclick="testWrongWasm()">
                ‚ö†Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
              </button>
            </div>
          </div>
        </div>

        <!-- –¢–µ—Å—Ç 9: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ WASM -->
        <div class="card bg-base-100 shadow">
          <div class="card-body">
            <h4 class="card-title text-base">–¢–µ—Å—Ç 9: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ WASM</h4>
            <p class="text-sm text-gray-600 mb-4">
              –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ WASM, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–∞–¥–µ–Ω–∏—é —Å–∞–π—Ç–∞.
              –ü—Ä–æ–≤–µ—Ä—è–µ—Ç fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫—Ä–∞—Ö–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
            </p>
            <div class="code-block">
              <div class="text-gray-500 text-xs mb-2">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</div>
              <div>wasmUrl: 'http://invalid-domain-that-does-not-exist.com/wasm.wasm'</div>
            </div>
            <div class="card-actions">
              <button class="btn btn-error btn-sm" onclick="testCriticalWasmError()">
                üí• –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
              </button>
            </div>
          </div>
        </div>

        <!-- –¢–µ—Å—Ç 10: –ü—Ä–æ–≤–µ—Ä–∫–∞ Web Workers -->
        <div class="card bg-base-100 shadow">
          <div class="card-body">
            <h4 class="card-title text-base">–¢–µ—Å—Ç 10: –ü—Ä–æ–≤–µ—Ä–∫–∞ Web Workers</h4>
            <p class="text-sm text-gray-600 mb-4">
              –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ Web Workers –æ—Ç–∫–ª—é—á–µ–Ω—ã –∏ IFCWorker –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è.
              –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–µ–∫—Ç—ã.
            </p>
            <div class="code-block">
              <div class="text-gray-500 text-xs mb-2">–ü—Ä–æ–≤–µ—Ä–∫–∞:</div>
              <div>‚Ä¢ Web Workers –æ—Ç–∫–ª—é—á–µ–Ω—ã</div>
              <div>‚Ä¢ IFCWorker –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è</div>
              <div>‚Ä¢ –ü–∞—Ä—Å–∏–Ω–≥ –≤ –≥–ª–∞–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ</div>
            </div>
            <div class="card-actions">
              <button class="btn btn-accent btn-sm" onclick="testWebWorkersDisabled()">
                üîß –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Web Workers
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –õ–æ–≥ —Å–æ–±—ã—Ç–∏–π -->
    <div class="demo-section">
      <h3 class="text-lg font-semibold mb-3">üìù –õ–æ–≥ —Å–æ–±—ã—Ç–∏–π</h3>
      <div id="eventLog" class="bg-gray-50 border rounded p-4 h-32 overflow-y-auto font-mono text-sm">
        <div class="text-gray-500">–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª—é–±–æ–π —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–æ–±—ã—Ç–∏–π...</div>
      </div>
      <button class="btn btn-outline btn-sm mt-2" onclick="clearLog()">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞ -->
  <div id="viewerModal" class="fixed inset-0 viewer-modal hidden items-center justify-center z-50">
    <div class="viewer-content relative">
      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
      <div class="absolute top-4 left-4 z-10 bg-white/90 backdrop-blur rounded px-3 py-2 shadow">
        <span id="modalTitle" class="font-medium">IFC Viewer</span>
      </div>
      
      <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è -->
      <button 
        class="absolute top-4 right-4 z-10 btn btn-circle btn-sm bg-white/90 backdrop-blur shadow"
        onclick="closeViewer()"
      >
        ‚úï
      </button>

      <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è IfcViewer -->
      <div id="viewerContainer" class="w-full h-full"></div>
    </div>
  </div>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å -->
  <script type="module">
    try {
      const { IfcViewer } = await import('./src/index.js')
      
      // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
      window.currentViewer = null
      window.IfcViewer = IfcViewer
      
      console.log('‚úÖ IfcViewer –º–æ–¥—É–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω')
    } catch (error) {
      console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ IfcViewer –º–æ–¥—É–ª—è:', error)
      
      // –°–æ–∑–¥–∞–µ–º –∑–∞–≥–ª—É—à–∫—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      window.IfcViewer = class MockIfcViewer {
        constructor(options) {
          console.log('MockIfcViewer —Å–æ–∑–¥–∞–Ω —Å –æ–ø—Ü–∏—è–º–∏:', options)
        }
        async init() {
          throw new Error('–ú–æ–¥—É–ª—å IfcViewer –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞.')
        }
      }
      
      alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª—è IfcViewer. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.')
    }

    // –§—É–Ω–∫—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    function logEvent(message, type = 'info') {
      const log = document.getElementById('eventLog')
      const time = new Date().toLocaleTimeString()
      const color = {
        info: 'text-blue-600',
        success: 'text-green-600', 
        error: 'text-red-600',
        warning: 'text-orange-600'
      }[type] || 'text-gray-600'
      
      log.innerHTML += `<div class="${color}">[${time}] ${message}</div>`
      log.scrollTop = log.scrollHeight
    }

    function clearLog() {
      document.getElementById('eventLog').innerHTML = 
        '<div class="text-gray-500">–õ–æ–≥ –æ—á–∏—â–µ–Ω...</div>'
    }

    // –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º
    function showModal(title = 'IFC Viewer') {
      document.getElementById('modalTitle').textContent = title
      const modal = document.getElementById('viewerModal')
      modal.classList.remove('hidden')
      modal.classList.add('flex')
    }

    function closeViewer() {
      if (window.currentViewer) {
        logEvent('–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞...', 'info')
        window.currentViewer.dispose()
        window.currentViewer = null
      }
      
      const modal = document.getElementById('viewerModal')
      modal.classList.add('hidden')
      modal.classList.remove('flex')
      
      // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
      document.getElementById('viewerContainer').innerHTML = ''
      logEvent('–ü—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ –∑–∞–∫—Ä—ã—Ç', 'success')
    }

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    function toggleTheme() {
      const html = document.documentElement
      const current = html.getAttribute('data-theme')
      html.setAttribute('data-theme', current === 'dark' ? 'light' : 'dark')
      logEvent(`–¢–µ–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞: ${current === 'dark' ? 'light' : 'dark'}`, 'info')
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–æ–±—ã—Ç–∏–π
    async function createViewer(options, title) {
      try {
        console.log('createViewer –≤—ã–∑–≤–∞–Ω —Å –æ–ø—Ü–∏—è–º–∏:', options, 'title:', title)
        logEvent(`–°–æ–∑–¥–∞–Ω–∏–µ IfcViewer: ${title}`, 'info')
        showModal(title)
        
        const container = document.getElementById('viewerContainer')
        console.log('–°–æ–∑–¥–∞—ë–º IfcViewer, container:', container, 'IfcViewer:', IfcViewer)
        const viewer = new IfcViewer({
          container,
          ...options
        })
        console.log('IfcViewer —Å–æ–∑–¥–∞–Ω:', viewer)

        // –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞
        container.addEventListener('ifcviewer:ready', (e) => {
          logEvent('–ü—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ', 'success')
        })

        container.addEventListener('ifcviewer:model-loaded', (e) => {
          const modelInfo = e.detail.model
          logEvent(`–ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞: modelID=${modelInfo?.modelID}`, 'success')
        })

        container.addEventListener('ifcviewer:error', (e) => {
          logEvent(`–û—à–∏–±–∫–∞: ${e.detail.error.message}`, 'error')
        })

        await viewer.init()
        window.currentViewer = viewer
        
        return viewer
      } catch (error) {
        logEvent(`–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞: ${error.message}`, 'error')
        closeViewer()
        throw error
      }
    }

    // –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏  
    window.testDefault = async function() {
      console.log('testDefault –≤—ã–∑–≤–∞–Ω')
      try {
        await createViewer({
          ifcUrl: '/ifc/170–û–ö-23_1_1_–ê–†_–ü.ifc'
          // –í—Å–µ –ø–æ –¥–µ—Ñ–æ–ª—Ç—É: showSidebar: false, showControls: false, showToolbar: true
        }, '–¢–µ—Å—Ç 1: –†–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é')
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –≤ testDefault:', error)
        logEvent('–û—à–∏–±–∫–∞ –≤ testDefault: ' + error.message, 'error')
      }
    }

    window.testManualLoad = async function() {
      await createViewer({
        autoLoad: false,
        showSidebar: true,
        showControls: true
      }, '–¢–µ—Å—Ç 2: –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞')
    }

    window.testCleanViewer = async function() {
      await createViewer({
        ifcUrl: '/ifc/170–û–ö-23_1_1_–ê–†_–ü.ifc',
        showSidebar: false,
        showControls: false,
        showToolbar: false,
        autoLoad: true
      }, '–¢–µ—Å—Ç 3: –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫')
    }

    window.testDarkTheme = async function() {
      await createViewer({
        ifcUrl: '/ifc/170–û–ö-23_1_1_–ê–†_–ü.ifc',
        showSidebar: true,
        showControls: true,
        autoLoad: true,
        theme: 'dark'
      }, '–¢–µ—Å—Ç 4: –¢—ë–º–Ω–∞—è —Ç–µ–º–∞')
    }

    window.testFullToolbar = async function() {
      await createViewer({
        ifcUrl: '/ifc/170–û–ö-23_1_1_–ê–†_–ü.ifc',
        showSidebar: true,
        showControls: true,
        showToolbar: true,
        autoLoad: true,
        theme: 'light'
      }, '–¢–µ—Å—Ç 5: –í—Å–µ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è')
    }

    window.testRealMinimal = async function() {
      await createViewer({
        ifcUrl: '/ifc/170–û–ö-23_1_1_–ê–†_–ü.ifc',
        showSidebar: false,  // –ù–∏–∫–∞–∫–∏—Ö –±–æ–∫–æ–≤—ã—Ö –ø–∞–Ω–µ–ª–µ–π
        showControls: false, // –ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
        showToolbar: true,   // –¢–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
        autoLoad: true
      }, '–¢–µ—Å—Ç 6: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫')
    }

    window.testCustomWasm = async function() {
      await createViewer({
        ifcUrl: '/ifc/170–û–ö-23_1_1_–ê–†_–ü.ifc',
        wasmUrl: '/wasm/web-ifc.wasm', // –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Ç—å –∫ WASM —Ñ–∞–π–ª—É
        showSidebar: false,
        showControls: false,
        showToolbar: true,
        autoLoad: true
      }, '–¢–µ—Å—Ç 7: –ö–∞—Å—Ç–æ–º–Ω—ã–π WASM URL')
    }

    window.testWrongWasm = async function() {
      await createViewer({
        ifcUrl: '/ifc/170–û–ö-23_1_1_–ê–†_–ü.ifc',
        wasmUrl: '/wrong-path/web-ifc.wasm', // –ù–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å - –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π
        showSidebar: false,
        showControls: false,
        showToolbar: true,
        autoLoad: true
      }, '–¢–µ—Å—Ç 8: –ù–µ–≤–µ—Ä–Ω—ã–π WASM URL')
    }

    window.testCriticalWasmError = async function() {
      try {
        await createViewer({
          ifcUrl: '/ifc/170–û–ö-23_1_1_–ê–†_–ü.ifc',
          wasmUrl: 'http://invalid-domain-that-does-not-exist.com/wasm.wasm', // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞
          showSidebar: false,
          showControls: false,
          showToolbar: true,
          autoLoad: true
        }, '–¢–µ—Å—Ç 9: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ WASM')
      } catch (error) {
        logEvent('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ: ' + error.message, 'success')
        console.log('‚úÖ –°–∞–π—Ç –Ω–µ —É–ø–∞–ª, –æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞:', error)
      }
    }

    window.testWebWorkersDisabled = async function() {
      logEvent('üîß –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å Web Workers...', 'info')
      
      try {
        const container = document.getElementById('viewerContainer')
        const viewer = new IfcViewer({
          container: container,
          ifcUrl: '/ifc/170–û–ö-23_1_1_–ê–†_–ü.ifc',
          autoLoad: false, // –ù–µ –∑–∞–≥—Ä—É–∂–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
          showToolbar: true
        })
        
        await viewer.init()
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ Web Workers –æ—Ç–∫–ª—é—á–µ–Ω—ã
        const ifcService = viewer.ifcService
        if (ifcService && ifcService.loader && ifcService.loader.ifcManager) {
          logEvent('‚úÖ IfcService –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'success')
          logEvent('‚úÖ Web Workers –æ—Ç–∫–ª—é—á–µ–Ω—ã (–ø–∞—Ä—Å–∏–Ω–≥ –≤ –≥–ª–∞–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ)', 'success')
          logEvent('‚úÖ IFCWorker –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è', 'success')
        } else {
          logEvent('‚ùå IfcService –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'error')
        }
        
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º viewer –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
        closeViewer()
        
      } catch (error) {
        logEvent('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ Web Workers: ' + error.message, 'error')
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ Web Workers:', error)
      }
    }

    // –£—Ç–∏–ª–∏—Ç—ã
    window.logEvent = logEvent
    window.clearLog = clearLog
    window.toggleTheme = toggleTheme
    window.closeViewer = closeViewer

    // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    logEvent('–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞.', 'success')
  </script>
</body>
</html>
